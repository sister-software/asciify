<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asciify Image Demo</title>

    <style>
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 0;
      }
    </style>

    <script type="module">
      import { Asciify, readFromImage } from '/dist/mod.mjs'

      const canvas = document.getElementById('demo')
      const asciify = new Asciify(canvas, {
        lineHeight: 0.5,
      })
      window.asciify = asciify // for debugging
      asciify.setSize(window.innerWidth, window.innerHeight)

      // document.body.appendChild(asciify._scratchCtx.canvas)
      const filePicker = document.getElementById('file-picker')

      filePicker.addEventListener('change', async (e) => {
        const [file] = e.target.files

        await asciify.rasterizeImage(file)
        filePicker.value = ''
      })
    </script>
  </head>
  <body>
    <h1>Asciify Image Demo</h1>

    <h2>Image conversion</h2>
    <label for="file-picker">Select an image</label>
    <input type="file" accept="image/*" id="file-picker" />
    <canvas id="demo" style="width: 100%; height: 100%"></canvas>
  </body>
</html>
